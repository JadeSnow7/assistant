<docs>
# å¿«é€Ÿå…¥é—¨æŒ‡å—

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [README.md](file://README.md)
- [requirements.txt](file://requirements.txt)
- [build.sh](file://scripts/build.sh)
- [run_server.sh](file://scripts/run_server.sh)
- [cli_client.py](file://ui/cli/cli_client.py)
- [main.py](file://python/main.py)
</cite>

## æ›´æ–°æ‘˜è¦
**å˜æ›´å†…å®¹**
- æ ¹æ®æœ€æ–°ä»£ç æäº¤æ›´æ–°äº†æ„å»ºå’Œå¯åŠ¨è„šæœ¬çš„å‚æ•°è¯´æ˜
- æ–°å¢äº†å¯¹`.env`ç¯å¢ƒé…ç½®æ–‡ä»¶çš„è¯´æ˜
- æ›´æ–°äº†ä¾èµ–å®‰è£…å’ŒC++æ¨¡å—ç¼–è¯‘éƒ¨åˆ†çš„å‘½ä»¤è¡Œè¾“å‡ºç¤ºä¾‹
- ä¿®æ­£äº†æœåŠ¡å¯åŠ¨å’Œå®¢æˆ·ç«¯æµ‹è¯•éƒ¨åˆ†çš„äº¤äº’æµç¨‹
- æ·»åŠ äº†modern_cli.pyç°ä»£åŒ–CLIå…¥å£çš„è¯´æ˜

### ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®ç»“æ„æ¦‚è§ˆ](#é¡¹ç›®ç»“æ„æ¦‚è§ˆ)
3. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
4. [ä¾èµ–å®‰è£…](#ä¾èµ–å®‰è£…)
5. [C++æ¨¡å—ç¼–è¯‘](#cæ¨¡å—ç¼–è¯‘)
6. [æœåŠ¡å¯åŠ¨](#æœåŠ¡å¯åŠ¨)
7. [å®¢æˆ·ç«¯æµ‹è¯•](#å®¢æˆ·ç«¯æµ‹è¯•)
8. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
9. [å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ](#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ)
10. [éªŒè¯ç»„ä»¶çŠ¶æ€](#éªŒè¯ç»„ä»¶çŠ¶æ€)

## ç®€ä»‹

æœ¬æŒ‡å—æ—¨åœ¨å¸®åŠ©æ–°æ‰‹å¼€å‘è€…å®Œæˆnexé¡¹ç›®çš„æœ¬åœ°éƒ¨ç½²ä¸é¦–æ¬¡è¿è¡Œã€‚é€šè¿‡é€æ­¥æŒ‡å¯¼ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•å‡†å¤‡Pythonè™šæ‹Ÿç¯å¢ƒã€å®‰è£…ä¾èµ–ã€ç¼–è¯‘C++æ¨¡å—ã€å¯åŠ¨æœåŠ¡å¹¶å‘é€æµ‹è¯•è¯·æ±‚ã€‚æ•´ä¸ªæµç¨‹æ¶µç›–äº†ä»ä»£ç æ‹‰å–åˆ°æœåŠ¡å¯ç”¨çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚

## é¡¹ç›®ç»“æ„æ¦‚è§ˆ

nexé¡¹ç›®é‡‡ç”¨C++å’ŒPythonæ··åˆæ¶æ„ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

```mermaid
graph TD
A[é¡¹ç›®æ ¹ç›®å½•] --> B[cpp]
A --> C[python]
A --> D[scripts]
A --> E[CMakeLists.txt]
A --> F[requirements.txt]
A --> G[cli_client.py]
B --> H[C++æ ¸å¿ƒæ¨¡å—]
C --> I[Pythonåº”ç”¨å±‚]
D --> J[æ„å»ºä¸éƒ¨ç½²è„šæœ¬]
```

**å›¾ç¤ºæ¥æº**
- [README.md](file://README.md)

## ç¯å¢ƒå‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²å®‰è£…å¿…è¦çš„å¼€å‘å·¥å…·ã€‚

### åŸºç¡€å·¥å…·è¦æ±‚
- Gitï¼šç”¨äºä»£ç ç‰ˆæœ¬æ§åˆ¶
- Python 3.9+ï¼šPythonè§£é‡Šå™¨ï¼ˆæ ¹æ®build.shè„šæœ¬è¦æ±‚ï¼‰
- pipï¼šPythonåŒ…ç®¡ç†å™¨
- CMake 3.20+ï¼šC++æ„å»ºç³»ç»Ÿ
- GCC/G++ æˆ– Clangï¼šC++ç¼–è¯‘å™¨

### æ£€æŸ¥å·¥å…·é“¾
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python3 --version

# æ£€æŸ¥pipç‰ˆæœ¬
pip3 --version

# æ£€æŸ¥CMakeç‰ˆæœ¬
cmake --version

# æ£€æŸ¥ç¼–è¯‘å™¨
gcc --version
```

é¢„æœŸè¾“å‡ºï¼š
```
Python 3.x.x
pip 2x.x.x
cmake version 3.20.x
gcc (Ubuntu x.x.x) x.x.x
```

**Section sources**
- [build.sh](file://scripts/build.sh#L10-L30)

## ä¾èµ–å®‰è£…

ä½¿ç”¨`requirements.txt`æ–‡ä»¶æ¥å®‰è£…Pythonä¾èµ–é¡¹ã€‚

### åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd 

# åˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate
```

### å®‰è£…ä¾èµ–åŒ…
```bash
# ä½¿ç”¨build.shè„šæœ¬å®‰è£…ä¾èµ–ï¼ˆæ¨èæ–¹å¼ï¼‰
./scripts/build.sh --venv

# æˆ–æ‰‹åŠ¨å®‰è£…
pip install -r requirements.txt
```

å®‰è£…å®Œæˆåï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š
```
âœ… Pythonä¾èµ–å®‰è£…å®Œæˆ
ğŸ‰ æ„å»ºå®Œæˆï¼
ğŸ“ ä¸‹ä¸€æ­¥:
   1. è¿è¡ŒæœåŠ¡: ./scripts/run_server.sh
   2. å¯åŠ¨CLI:  python3 start_cli.py
   3. æŸ¥çœ‹æ–‡æ¡£: docs/README.md
   4. é…ç½®æ’ä»¶: ç¼–è¾‘ src/plugins/
```

**Section sources**
- [requirements.txt](file://requirements.txt)
- [build.sh](file://scripts/build.sh#L100-L120)

## C++æ¨¡å—ç¼–è¯‘

ä½¿ç”¨`build.sh`è„šæœ¬ä¸­çš„CMakeæµç¨‹ç¼–è¯‘C++æ ¸å¿ƒæ¨¡å—ã€‚

### æ‰§è¡Œç¼–è¯‘å‘½ä»¤
```bash
# è¿è¡Œæ„å»ºè„šæœ¬
./scripts/build.sh --venv
```

è¯¥è„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
1. æ£€æŸ¥å¿…éœ€çš„ä¾èµ–é¡¹
2. è®¾ç½®æ„å»ºç›®å½•
3. ä½¿ç”¨CMakeé…ç½®é¡¹ç›®
4. ç¼–è¯‘C++ä»£ç 
5. å®‰è£…ç”Ÿæˆçš„åº“å’Œå¯æ‰§è¡Œæ–‡ä»¶

### ç¼–è¯‘è¿‡ç¨‹è¾“å‡º
æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ‚¨å°†çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š
```
ğŸš€ å¼€å§‹æ„å»ºAI Assistant...
ğŸ“‹ æ£€æŸ¥ä¾èµ–...
âœ… ä¾èµ–æ£€æŸ¥é€šè¿‡
ğŸ“ è®¾ç½®æ„å»ºç¯å¢ƒ...
ğŸ”¨ æ„å»ºC++æ ¸å¿ƒæ¨¡å—...
-- The C compiler identification is GNU x.x.x
-- The CXX compiler identification is GNU x.x.x
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/cc - skipped
...
[100%] Built target ai_assistant_server
âœ… C++æ¨¡å—æ„å»ºå®Œæˆ
ğŸ å®‰è£…Pythonä¾èµ–...
âœ… è™šæ‹Ÿç¯å¢ƒå·²åˆ›å»ºå¹¶æ¿€æ´»
âœ… Pythonä¾èµ–å®‰è£…å®Œæˆ
ğŸ§ª è¿è¡Œæµ‹è¯•...
ğŸ‰ æ„å»ºå®Œæˆï¼
```

**Section sources**
- [build.sh](file://scripts/build.sh#L40-L90)
- [CMakeLists.txt](file://cpp/CMakeLists.txt)

## æœåŠ¡å¯åŠ¨

ä½¿ç”¨`run_server.sh`è„šæœ¬å¯åŠ¨AIåŠ©æ‰‹æœåŠ¡ã€‚

### å¯åŠ¨æœåŠ¡
```bash
# å¯åŠ¨æœåŠ¡
./scripts/run_server.sh
```

### è‡ªå®šä¹‰é…ç½®å¯åŠ¨
```bash
# æŒ‡å®šä¸åŒç«¯å£å¯åŠ¨
./scripts/run_server.sh --port 8080 --grpc-port 50052

# å¯ç”¨è°ƒè¯•æ¨¡å¼
./scripts/run_server.sh --debug
```

### å¯åŠ¨è¿‡ç¨‹è¾“å‡º
æˆåŠŸå¯åŠ¨åï¼Œæ‚¨å°†çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š
```
ğŸš€ å¯åŠ¨AI AssistantæœåŠ¡...
AI Assistant æœåŠ¡å¯åŠ¨è„šæœ¬ v2.0.0
==============================================
ğŸ“‹ æœåŠ¡é…ç½®
==================
APIä¸»æœº: 0.0.0.0
APIç«¯å£: 8000
gRPCç«¯å£: 50051
å·¥ä½œè¿›ç¨‹: 4
æ—¥å¿—çº§åˆ«: INFO
è°ƒè¯•æ¨¡å¼: å¦
è¯¦ç»†è¾“å‡º: å¦
å¼ºåˆ¶é‡å¯: å¦

ğŸ“ åˆ›å»ºå¿…è¦ç›®å½•...
âœ… ç›®å½•åˆ›å»ºå®Œæˆ
ğŸ”§ å¯åŠ¨C++åç«¯æœåŠ¡...
ğŸ“¡ åœ¨ç«¯å£ 50051 å¯åŠ¨gRPCæœåŠ¡...
âœ… gRPCæœåŠ¡å·²å¯åŠ¨ (PID: 12345)
ğŸ å¯åŠ¨Python APIæœåŠ¡...
ğŸŒ åœ¨ http://0.0.0.0:8000 å¯åŠ¨APIæœåŠ¡...
âœ… APIæœåŠ¡å·²å¯åŠ¨ (PID: 12346)
ğŸ¥ æ‰§è¡Œå¢å¼ºå¥åº·æ£€æŸ¥...
ğŸŒ¡ï¸ å¥åº·æ£€æŸ¥æ‘˜è¦
==================
âœ… gRPCæœåŠ¡: å¥åº·
âœ… APIæœåŠ¡: å¥åº·

âœ… æ‰€æœ‰æœåŠ¡å¥åº·æ£€æŸ¥é€šè¿‡

ğŸ‰ AI Assistant æœåŠ¡å¯åŠ¨æˆåŠŸï¼
================================
ğŸ“¡ gRPCæœåŠ¡:   localhost:50051
ğŸŒ APIæœåŠ¡:    http://0.0.0.0:8000
ğŸ“Š å¥åº·æ£€æŸ¥:   http://0.0.0.0:8000/health
ğŸ“– APIæ–‡æ¡£:    http://0.0.0.0:8000/docs
ğŸ“‹ æ—¥å¿—ç›®å½•:   ./logs/

ğŸ”§ ç®¡ç†å‘½ä»¤:
   æŸ¥çœ‹æ—¥å¿—:   tail -f logs/api_server.log
   åœæ­¢æœåŠ¡:   ./scripts/stop_server.sh
   é‡å¯æœåŠ¡:   ./scripts/restart_server.sh
```

**Section sources**
- [run_server.sh](file://scripts/run_server.sh#L30-L150)

## å®¢æˆ·ç«¯æµ‹è¯•

ä½¿ç”¨`cli_client.py`æˆ–`modern_cli.py`å‘é€æµ‹è¯•è¯·æ±‚ä»¥éªŒè¯æœåŠ¡æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

### è¿è¡Œäº¤äº’å¼å®¢æˆ·ç«¯
```bash
# è¿è¡Œç°ä»£åŒ–CLIå®¢æˆ·ç«¯
python modern_cli.py

# æˆ–è¿è¡Œä¼ ç»ŸCLIå®¢æˆ·ç«¯
python ui/cli/cli_client.py
```

### å‘é€æµ‹è¯•æ¶ˆæ¯
```
ğŸ¤– AI Assistant CLI v1.0.0
è¾“å…¥ 'help' æŸ¥çœ‹å¸®åŠ©ï¼Œè¾“å…¥ 'exit' é€€å‡º
==================================================

[new] > chat ä½ å¥½ï¼Œä¸–ç•Œï¼

ç”¨æˆ·: ä½ å¥½ï¼Œä¸–ç•Œï¼
AI: ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ çš„å—ï¼Ÿ
  (ä½¿ç”¨: local_small - ç®€å•ä»»åŠ¡ï¼Œæœ¬åœ°æ¨¡å‹å¤„ç†)

[new] > plugins

ğŸ”Œ æ’ä»¶åˆ—è¡¨ (1ä¸ª):
  weather_plugin v1.0.0 - ğŸŸ¢ å¯ç”¨
    å¤©æ°”æŸ¥è¯¢æ’ä»¶ï¼Œæ”¯æŒæŸ¥è¯¢å…¨çƒåŸå¸‚å¤©æ°”ä¿¡æ¯
    èƒ½åŠ›: weather_query, weather_forecast, weather_alerts


[new] > status

ğŸ“Š ç³»ç»ŸçŠ¶æ€:
  CPUä½¿ç”¨ç‡: 15.2%
  å†…å­˜ä½¿ç”¨ç‡: 45.6%
  GPUä½¿ç”¨ç‡: 0.0%
  æ´»è·ƒä¼šè¯: 1
  æ€»è¯·æ±‚æ•°: 5
  å¹³å‡å“åº”æ—¶é—´: 120.5ms
  ç»„ä»¶çŠ¶æ€:
    grpc_client: ğŸŸ¢ å¥åº·
    orchestrator: ğŸŸ¢ å¥åº·

[new] > health

ğŸŸ¢ æœåŠ¡å¥åº·
```

### å•å‘½ä»¤æ¨¡å¼æµ‹è¯•
```bash
# ç›´æ¥æ‰§è¡Œå•ä¸ªå‘½ä»¤
python ui/cli/cli_client.py health
python ui/cli/cli_client.py status
python ui/cli/cli_client.py plugins
```

**Section sources**
- [modern_cli.py](file://modern_cli.py)
- [cli_client.py](file://ui/cli/cli_client.py)
- [main.py](file://python/main.py)

## é…ç½®è¯´æ˜

äº†è§£å…³é”®é…ç½®é¡¹åŠå…¶ä½œç”¨ã€‚

### ç¯å¢ƒå˜é‡
| å˜é‡å | é»˜è®¤å€¼ | è¯´æ˜ |
|-------|--------|------|
| `HOST` | 0.0.0.0 | APIæœåŠ¡ç»‘å®šçš„ä¸»æœºåœ°å€ |
| `PORT` | 8000 | HTTP APIæœåŠ¡ç«¯å£ |
| `GRPC_PORT` | 50051 | gRPCæœåŠ¡ç«¯å£ |
| `LOG_LEVEL` | INFO | æ—¥å¿—çº§åˆ« |
| `DEBUG` | false | æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼ |

### é…ç½®ä¼˜å…ˆçº§
1. å‘½ä»¤è¡Œå‚æ•°ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. ç¯å¢ƒå˜é‡
3. è„šæœ¬é»˜è®¤å€¼ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰

ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¦†ç›–é»˜è®¤ç«¯å£ï¼š
```bash
# é€šè¿‡å‘½ä»¤è¡Œå‚æ•°
./scripts/run_server.sh --port 9000

# é€šè¿‡ç¯å¢ƒå˜é‡
export PORT=9000
./scripts/run_server.sh
```

### .envé…ç½®æ–‡ä»¶
é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„`.env`æ–‡ä»¶å¯ç”¨äºè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
```
NEX_HOST=0.0.0.0
NEX_PORT=8000
NEX_GRPC_PORT=50051
DATABASE_PATH=./data/database.db
LOG_PATH=./logs
API_KEY=your_api_key_here
JWT_SECRET=your_jwt_secret_here
```

**Section sources**
- [run_server.sh](file://scripts/run_server.sh#L10-L25)
- [main.py](file://python/main.py#L50-L60)
- [.env.example](file://.env.example)

## å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### ç¼–è¯‘å·¥å…·é“¾ç¼ºå¤±
**é—®é¢˜ç°è±¡ï¼š**
```
âŒ CMakeæœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…CMake
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install cmake build-essential

# CentOS/RHEL
sudo yum groupinstall "Development Tools"
sudo yum install cmake

# macOS
brew install cmake
```

### ç«¯å£å†²çª
**é—®é¢˜ç°è±¡ï¼š**
```
âš ï¸  ç«¯å£ 8000 å·²è¢«å ç”¨ (python.*main.py)
æ˜¯å¦è¦åœæ­¢ç°æœ‰æœåŠ¡å¹¶é‡å¯ï¼Ÿ(y/N):
```

**è§£å†³æ–¹æ¡ˆï¼š**
- è¾“å…¥`y`è®©è„šæœ¬è‡ªåŠ¨ç»ˆæ­¢å ç”¨è¿›ç¨‹
- æ‰‹åŠ¨æŸ¥æ‰¾å¹¶ç»ˆæ­¢è¿›ç¨‹ï¼š
```bash
# æŸ¥æ‰¾å ç”¨8000ç«¯å£çš„è¿›ç¨‹
lsof -i :8000

# ç»ˆæ­¢è¿›ç¨‹
kill <PID>
```

### Pythonä¾èµ–å®‰è£…å¤±è´¥
**é—®é¢˜ç°è±¡ï¼š**
```
âŒ Pythonä¾èµ–æœªå®‰è£…ï¼Œè¯·å…ˆè¿è¡Œæ„å»ºè„šæœ¬
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ç¡®ä¿è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
source venv/bin/activate

# å‡çº§pip
pip install --upgrade pip

# é‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### C++æ¨¡å—æœªæ‰¾åˆ°
**é—®é¢˜ç°è±¡ï¼š**
```
âŒ C++æœåŠ¡æœªæ‰¾åˆ°ï¼Œè¯·å…ˆè¿è¡Œæ„å»ºè„šæœ¬
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ç¡®è®¤æ„å»ºç›®å½•å­˜åœ¨
ls -la build/

# é‡æ–°è¿è¡Œæ„å»ºè„šæœ¬
./scripts/build.sh --venv
```

**Section sources**
- [build.sh](file://scripts/build.sh#L10-L30)
- [run_server.sh](file://scripts/run_server.sh#L100-L120)

## éªŒè¯ç»„ä»¶